<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="../assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        Exception handling
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    
    <!--     Fonts and icons     -->
    <link rel="stylesheet" 
        type="text/css" 
        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    
    <link rel="stylesheet" 
        href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" 
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" 
        crossorigin="anonymous">

    <!-- Code highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css">

    <!-- CSS Files -->
    <link href="../assets/css/material-kit.css?v=2.0.5" rel="stylesheet" />
    <link href="../assets/css/main.css" rel="stylesheet" />
</head>
<body class="profile-page sidebar-collapse">
        <nav class="navbar navbar-transparent navbar-color-on-scroll fixed-top navbar-expand-lg" color-on-scroll="100" id="sectionsNav">
        <div class="container">
            <div class="navbar-translate">
                <a class="navbar-brand" href="/">
                    I'm Johan
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="navbar-toggler-icon"></span>
                    <span class="navbar-toggler-icon"></span>
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="/posts/index.html">
                                <i class="fa fa-blog"></i>
                                Blog
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/about">
                                <i class="fa fa-user"></i>
                                About Me
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/kudos">
                                <i class="fa fa-gift"></i>
                                Kudos
                            </a>
                        </li>
                <li class="nav-item">
                    <a class="nav-link" rel="tooltip" title="" data-placement="bottom" href="https://github.com/johanvergeer" target="_blank" data-original-title="Follow me on GitHub">
                        <i class="fab fa-github fa-2x"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" rel="tooltip" title="" data-placement="bottom" href="https://www.linkedin.com/in/johanvergeer" target="_blank" data-original-title="Join my network on">
                        <i class="fab fa-linkedin fa-2x"></i>
                    </a>
                </li>
            </ul>
        </div>
        </div>
    </nav>

    <div class="page-header header-filter" 
    style='background-image: url("../assets/img/city-profile.jpg"); transform: translate3d(0px, 0px, 0px);' 
    data-parallax="true">
</div>

<div class="main main-raised">
    <div class="section section-basic">
        <div class="container">
                  


<div class="title">
    <h1>Exception handling</h1>
</div>

<div class="row mb-1">
    <div class="col">
        

<span class="mr-3"><i class="fa fa-user"></i> Johan Vergeer</span>
<span><i class="fa fa-calendar"></i> <time datetime="YYYY-04-DD">Sunday, April 7, 2019</time></span>
    </div>    
</div>
<div class="row mb-1">
    <div class="col">
        

<i class="fas fa-tags"></i> 



<a href="/tags/General" class="badge badge-pill badge-lg badge-primary">
    General
</a>
    </div>   
</div>
<div class="row">
    <div class="col">
        <a href="/posts">Back To posts <i class="fas fa-chevron-right"></i><i class="fas fa-chevron-right"></i></a>
    </div>
</div>

<hr>

<p>A couple of weeks ago I had a discussion with one of my colleagues about exception handling. What we agreed on is that an exception should be thrown when an event occurs the system cannot recover from. Even so, exception handling is often used to pass.</p>
<p>There are a couple of disadvantages of throwing exceptions:</p>
<ul>
<li>Exceptions are costly</li>
<li>You cannot tell if a method will throw an exception just by looking at it</li>
</ul>
<h1 id="the-cost-of-exceptions">The cost of exceptions</h1>
<p>I created a very simple test to measure the difference between returning a boolean and throwing an exception. I'm aware that this test might be very trivial, but I think it gives a good first impression.</p>
<p>This is the code I used for this test. The first one throws an exception, which is caught. The second one returns a boolean indicating whether the operation was successful.</p>
<pre><code class="language-csharp">class Program
{
    static void Main(string[] args)
    {
        CatchException();
    }

    private static void CatchException()
    {
        try
        {
            ThrowException();
            Console.WriteLine(&quot;No exception occurred&quot;);
        }
        catch (Exception e)
        {
            Console.WriteLine(&quot;An exception occurred&quot;);
            Console.ReadKey();
        }
    }

    private static void ThrowException()
    {
        throw new Exception(&quot;Exception thrown&quot;);
    }
}
</code></pre>
<pre><code class="language-csharp">class Program
{
    static void Main(string[] args)
    {
        CatchBool();
    }

    private static void CatchBool()
    {
        var isSuccess = ReturnBool();

        Console.WriteLine(isSuccess ? &quot;No exception occurred&quot; : &quot;An exception occurred&quot;);
        Console.ReadKey();
    }

    private static bool ReturnBool()
    {
        return true;
    }
}
</code></pre>
<p>The measurements were done with the Visual Studio 2017 builtin profiler. When running these tests the results were the same each time. These results are shown in the table below.</p>
<table class="table">
<thead>
<tr>
<th>Measurement</th>
<th>Objects</th>
<th>Objects Diff</th>
<th>Heap size</th>
<th>Heap size diff</th>
<th>CPU %</th>
</tr>
</thead>
<tbody>
<tr>
<td>Start</td>
<td>360</td>
<td>n/a</td>
<td>65.44 KB</td>
<td>n/a</td>
<td>n/a</td>
</tr>
<tr>
<td>Exception thrown</td>
<td>657</td>
<td>+297 (45%)</td>
<td>90.63 KB</td>
<td>+25.19 KB (28%)</td>
<td>50%</td>
</tr>
<tr>
<td>Bool returned</td>
<td>416</td>
<td>+56  (13%)</td>
<td>72.44 KB</td>
<td>+7.00 KB  (10%)</td>
<td>25%</td>
</tr>
</tbody>
</table>
<p>As you can see, even for this very simple example, throwing an exception is far more expensive then returning a boolean.</p>
<h1 id="code-intent">Code intent</h1>
<p>It is very hard to figure out what exceptions are thrown just by looking at a method. This goes against this quote from Grady Booch:</p>
<blockquote class="blockquote">
<p>“Clean code is simple and direct. Clean code reads like well-written prose. Clean code never obscures the designer’s intent but rather is full of crisp abstractions and straightforward lines of control.&quot;</p>
</blockquote>
<h1 id="when-to-use-exceptions">When to use exceptions?</h1>
<p>Should we even still use exceptions, since they are so expensive and are very bad in sharing code intent? The answer to this is yes, we should. When should we use exceptions? Whenever something occurs in the normal flow of our program that the system cannot recover from.</p>
<p>Some good examples when to use an exception:</p>
<ul>
<li>The database is not available</li>
<li>Out of memory</li>
<li>Null pointer</li>
</ul>
<p>Some examples when you should not thrown an exception:</p>
<ul>
<li>User is not logged in. Route the user to a login page</li>
<li>A page does not exist. Let the user know the page does not exist</li>
<li>Duplicate key. Let the user know the key is already in use</li>
</ul>
<h1 id="conclusion">Conclusion</h1>
<p>As with all things in programming, and in life, it depends on the situation whether you should use an exception or another design pattern. Just don't be a lazy programmer that throws an exception whenever it feels most convenient.</p>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'johanvergeer-github-io'; // required: replace example with your forum shortname
    var disqus_identifier = 'exception-handling';
    var disqus_title = 'Exception handling';
    var disqus_url = 'http://johanvergeer.github.io/posts/exception-handling';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</div>

    <footer class="footer footer-default">
    <div class="container">
      <nav class="float-left">
        <ul>
          <li>
            <a href="/">
              I'm Johan
            </a>
          </li>
        </ul>
      </nav>
      <div class="copyright float-right">
        ©
        <script>
          document.write(new Date().getFullYear())
        </script>, made with <i class="material-icons">favorite</i> by
        <a href="https://johanvergeer.github.io" target="_blank">Johan Vergeer</a>.
      </div>
    </div>
  </footer>
    <!--   Core JS Files   -->
<script src="../assets/js/core/jquery.min.js" type="text/javascript"></script>
<script src="../assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="../assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
<script src="../assets/js/plugins/moment.min.js"></script>
<!--	Plugin for the Datepicker, full documentation here: https://github.com/Eonasdan/bootstrap-datetimepicker -->
<script src="../assets/js/plugins/bootstrap-datetimepicker.js" type="text/javascript"></script>
<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
<script src="../assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
<!-- Control Center for Material Kit: parallax effects, scripts for the example pages etc -->
<script src="../assets/js/material-kit.js?v=2.0.5" type="text/javascript"></script>

<!-- Code highlighting -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/cs.min.js"></script>
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/css.min.js"></script>
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/json.min.js"></script>
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/markdown.min.js"></script>
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/powershell.min.js"></script>
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>